<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Codebook | The Good Loser</title>
  <meta name="description" content="Chapter 2 Codebook | The Good Loser" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Codebook | The Good Loser" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="loser-picture.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Codebook | The Good Loser" />
  
  
  <meta name="twitter:image" content="loser-picture.png" />

<meta name="author" content="Peter Esaiasson, Sveinung Arnesen, and Hannah Werner" />


<meta name="date" content="2020-01-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-management.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.11/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<script src="libs/jszip-1.10.19/jszip.min.js"></script>
<script src="libs/pdfmake-1.10.19/pdfmake.min.js"></script>
<script src="libs/pdfmake-1.10.19/vfs_fonts.js"></script>
<link href="libs/dt-ext-buttons-1.10.19/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.19/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.19/js/buttons.print.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Good Loser Project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="codebook.html"><a href="codebook.html"><i class="fa fa-check"></i><b>2</b> Codebook</a><ul>
<li class="chapter" data-level="2.0.1" data-path="codebook.html"><a href="codebook.html#metadata"><i class="fa fa-check"></i><b>2.0.1</b> Metadata</a></li>
<li class="chapter" data-level="2.1" data-path="codebook.html"><a href="codebook.html#variables"><i class="fa fa-check"></i><b>2.1</b> Variables</a><ul>
<li class="chapter" data-level="2.1.1" data-path="codebook.html"><a href="codebook.html#Q64"><i class="fa fa-check"></i><b>2.1.1</b> Q64</a></li>
<li class="chapter" data-level="2.1.2" data-path="codebook.html"><a href="codebook.html#Q63"><i class="fa fa-check"></i><b>2.1.2</b> Q63</a></li>
<li class="chapter" data-level="2.1.3" data-path="codebook.html"><a href="codebook.html#S3_1_1"><i class="fa fa-check"></i><b>2.1.3</b> S3_1_1</a></li>
<li class="chapter" data-level="2.1.4" data-path="codebook.html"><a href="codebook.html#S3_2_1"><i class="fa fa-check"></i><b>2.1.4</b> S3_2_1</a></li>
<li class="chapter" data-level="2.1.5" data-path="codebook.html"><a href="codebook.html#S3_4_1_1"><i class="fa fa-check"></i><b>2.1.5</b> S3_4_1_1</a></li>
<li class="chapter" data-level="2.1.6" data-path="codebook.html"><a href="codebook.html#S3_4_1_2"><i class="fa fa-check"></i><b>2.1.6</b> S3_4_1_2</a></li>
<li class="chapter" data-level="2.1.7" data-path="codebook.html"><a href="codebook.html#S3_5_1"><i class="fa fa-check"></i><b>2.1.7</b> S3_5_1</a></li>
<li class="chapter" data-level="2.1.8" data-path="codebook.html"><a href="codebook.html#S3_6_1_1"><i class="fa fa-check"></i><b>2.1.8</b> S3_6_1_1</a></li>
<li class="chapter" data-level="2.1.9" data-path="codebook.html"><a href="codebook.html#S3_6_1_2"><i class="fa fa-check"></i><b>2.1.9</b> S3_6_1_2</a></li>
<li class="chapter" data-level="2.1.10" data-path="codebook.html"><a href="codebook.html#S3_7_1_1"><i class="fa fa-check"></i><b>2.1.10</b> S3_7_1_1</a></li>
<li class="chapter" data-level="2.1.11" data-path="codebook.html"><a href="codebook.html#S3_7_1_2"><i class="fa fa-check"></i><b>2.1.11</b> S3_7_1_2</a></li>
<li class="chapter" data-level="2.1.12" data-path="codebook.html"><a href="codebook.html#S3_8_1_1"><i class="fa fa-check"></i><b>2.1.12</b> S3_8_1_1</a></li>
<li class="chapter" data-level="2.1.13" data-path="codebook.html"><a href="codebook.html#S3_8_1_2"><i class="fa fa-check"></i><b>2.1.13</b> S3_8_1_2</a></li>
<li class="chapter" data-level="2.1.14" data-path="codebook.html"><a href="codebook.html#Studie3sel"><i class="fa fa-check"></i><b>2.1.14</b> Studie3sel</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="codebook.html"><a href="codebook.html#missingness-report"><i class="fa fa-check"></i><b>2.2</b> Missingness report</a></li>
<li class="chapter" data-level="2.3" data-path="codebook.html"><a href="codebook.html#codebook-table"><i class="fa fa-check"></i><b>2.3</b> Codebook table</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-management.html"><a href="data-management.html"><i class="fa fa-check"></i><b>3</b> Data management</a></li>
<li class="chapter" data-level="4" data-path="main-effects.html"><a href="main-effects.html"><i class="fa fa-check"></i><b>4</b> Main effects</a></li>
<li class="chapter" data-level="5" data-path="effects-on-losers.html"><a href="effects-on-losers.html"><i class="fa fa-check"></i><b>5</b> Effects on losers</a></li>
<li class="chapter" data-level="6" data-path="effects-on-winners.html"><a href="effects-on-winners.html"><i class="fa fa-check"></i><b>6</b> Effects on winners</a></li>
<li class="chapter" data-level="7" data-path="codebook-1.html"><a href="codebook-1.html"><i class="fa fa-check"></i><b>7</b> Codebook</a><ul>
<li class="chapter" data-level="7.0.1" data-path="codebook-1.html"><a href="codebook-1.html#metadata-1"><i class="fa fa-check"></i><b>7.0.1</b> Metadata</a></li>
<li class="chapter" data-level="7.1" data-path="codebook-1.html"><a href="codebook-1.html#variables-1"><i class="fa fa-check"></i><b>7.1</b> Variables</a><ul>
<li class="chapter" data-level="7.1.1" data-path="codebook-1.html"><a href="codebook-1.html#responseid"><i class="fa fa-check"></i><b>7.1.1</b> responseid</a></li>
<li class="chapter" data-level="7.1.2" data-path="codebook-1.html"><a href="codebook-1.html#r9pad1"><i class="fa fa-check"></i><b>7.1.2</b> r9pad1</a></li>
<li class="chapter" data-level="7.1.3" data-path="codebook-1.html"><a href="codebook-1.html#r9pad2"><i class="fa fa-check"></i><b>7.1.3</b> r9pad2</a></li>
<li class="chapter" data-level="7.1.4" data-path="codebook-1.html"><a href="codebook-1.html#r9pad3"><i class="fa fa-check"></i><b>7.1.4</b> r9pad3</a></li>
<li class="chapter" data-level="7.1.5" data-path="codebook-1.html"><a href="codebook-1.html#r10panelpad"><i class="fa fa-check"></i><b>7.1.5</b> r10panelpad</a></li>
<li class="chapter" data-level="7.1.6" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1"><i class="fa fa-check"></i><b>7.1.6</b> r10pad1</a></li>
<li class="chapter" data-level="7.1.7" data-path="codebook-1.html"><a href="codebook-1.html#r10pad2"><i class="fa fa-check"></i><b>7.1.7</b> r10pad2</a></li>
<li class="chapter" data-level="7.1.8" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3_mobil"><i class="fa fa-check"></i><b>7.1.8</b> r10pad3_mobil</a></li>
<li class="chapter" data-level="7.1.9" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3a_ran"><i class="fa fa-check"></i><b>7.1.9</b> r10pad3a_ran</a></li>
<li class="chapter" data-level="7.1.10" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3b_ran"><i class="fa fa-check"></i><b>7.1.10</b> r10pad3b_ran</a></li>
<li class="chapter" data-level="7.1.11" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3ended"><i class="fa fa-check"></i><b>7.1.11</b> r10pad3ended</a></li>
<li class="chapter" data-level="7.1.12" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3error"><i class="fa fa-check"></i><b>7.1.12</b> r10pad3error</a></li>
<li class="chapter" data-level="7.1.13" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3paused"><i class="fa fa-check"></i><b>7.1.13</b> r10pad3paused</a></li>
<li class="chapter" data-level="7.1.14" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3played"><i class="fa fa-check"></i><b>7.1.14</b> r10pad3played</a></li>
<li class="chapter" data-level="7.1.15" data-path="codebook-1.html"><a href="codebook-1.html#r10pad3_timespent"><i class="fa fa-check"></i><b>7.1.15</b> r10pad3_timespent</a></li>
<li class="chapter" data-level="7.1.16" data-path="codebook-1.html"><a href="codebook-1.html#r10pad4"><i class="fa fa-check"></i><b>7.1.16</b> r10pad4</a></li>
<li class="chapter" data-level="7.1.17" data-path="codebook-1.html"><a href="codebook-1.html#r10pad4_comment"><i class="fa fa-check"></i><b>7.1.17</b> r10pad4_comment</a></li>
<li class="chapter" data-level="7.1.18" data-path="codebook-1.html"><a href="codebook-1.html#r10pad5"><i class="fa fa-check"></i><b>7.1.18</b> r10pad5</a></li>
<li class="chapter" data-level="7.1.19" data-path="codebook-1.html"><a href="codebook-1.html#r10pad6"><i class="fa fa-check"></i><b>7.1.19</b> r10pad6</a></li>
<li class="chapter" data-level="7.1.20" data-path="codebook-1.html"><a href="codebook-1.html#r10pad7"><i class="fa fa-check"></i><b>7.1.20</b> r10pad7</a></li>
<li class="chapter" data-level="7.1.21" data-path="codebook-1.html"><a href="codebook-1.html#r10pad8"><i class="fa fa-check"></i><b>7.1.21</b> r10pad8</a></li>
<li class="chapter" data-level="7.1.22" data-path="codebook-1.html"><a href="codebook-1.html#r10pad9"><i class="fa fa-check"></i><b>7.1.22</b> r10pad9</a></li>
<li class="chapter" data-level="7.1.23" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_1"><i class="fa fa-check"></i><b>7.1.23</b> r10pad1_9_backward_1</a></li>
<li class="chapter" data-level="7.1.24" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_2"><i class="fa fa-check"></i><b>7.1.24</b> r10pad1_9_backward_2</a></li>
<li class="chapter" data-level="7.1.25" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_3"><i class="fa fa-check"></i><b>7.1.25</b> r10pad1_9_backward_3</a></li>
<li class="chapter" data-level="7.1.26" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_4"><i class="fa fa-check"></i><b>7.1.26</b> r10pad1_9_backward_4</a></li>
<li class="chapter" data-level="7.1.27" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_5"><i class="fa fa-check"></i><b>7.1.27</b> r10pad1_9_backward_5</a></li>
<li class="chapter" data-level="7.1.28" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_6"><i class="fa fa-check"></i><b>7.1.28</b> r10pad1_9_backward_6</a></li>
<li class="chapter" data-level="7.1.29" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_7"><i class="fa fa-check"></i><b>7.1.29</b> r10pad1_9_backward_7</a></li>
<li class="chapter" data-level="7.1.30" data-path="codebook-1.html"><a href="codebook-1.html#r10pad1_9_backward_8"><i class="fa fa-check"></i><b>7.1.30</b> r10pad1_9_backward_8</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="codebook-1.html"><a href="codebook-1.html#missingness-report-1"><i class="fa fa-check"></i><b>7.2</b> Missingness report</a></li>
<li class="chapter" data-level="7.3" data-path="codebook-1.html"><a href="codebook-1.html#codebook-table-1"><i class="fa fa-check"></i><b>7.3</b> Codebook table</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-management-1.html"><a href="data-management-1.html"><i class="fa fa-check"></i><b>8</b> Data management</a></li>
<li class="chapter" data-level="9" data-path="main-effects-1.html"><a href="main-effects-1.html"><i class="fa fa-check"></i><b>9</b> Main effects</a></li>
<li class="chapter" data-level="10" data-path="effects-on-losers-1.html"><a href="effects-on-losers-1.html"><i class="fa fa-check"></i><b>10</b> Effects on losers</a></li>
<li class="chapter" data-level="11" data-path="codebook-2.html"><a href="codebook-2.html"><i class="fa fa-check"></i><b>11</b> Codebook</a><ul>
<li class="chapter" data-level="11.0.1" data-path="codebook-2.html"><a href="codebook-2.html#metadata-2"><i class="fa fa-check"></i><b>11.0.1</b> Metadata</a></li>
<li class="chapter" data-level="11.1" data-path="codebook-2.html"><a href="codebook-2.html#variables-2"><i class="fa fa-check"></i><b>11.1</b> Variables</a><ul>
<li class="chapter" data-level="11.1.1" data-path="codebook-1.html"><a href="codebook-1.html#responseid"><i class="fa fa-check"></i><b>11.1.1</b> responseid</a></li>
<li class="chapter" data-level="11.1.2" data-path="codebook-2.html"><a href="codebook-2.html#r13pad1"><i class="fa fa-check"></i><b>11.1.2</b> r13pad1</a></li>
<li class="chapter" data-level="11.1.3" data-path="codebook-2.html"><a href="codebook-2.html#r13pad2"><i class="fa fa-check"></i><b>11.1.3</b> r13pad2</a></li>
<li class="chapter" data-level="11.1.4" data-path="codebook-2.html"><a href="codebook-2.html#r13pad3"><i class="fa fa-check"></i><b>11.1.4</b> r13pad3</a></li>
<li class="chapter" data-level="11.1.5" data-path="codebook-2.html"><a href="codebook-2.html#r13pad4"><i class="fa fa-check"></i><b>11.1.5</b> r13pad4</a></li>
<li class="chapter" data-level="11.1.6" data-path="codebook-2.html"><a href="codebook-2.html#r13pad5_avsender"><i class="fa fa-check"></i><b>11.1.6</b> r13pad5_avsender</a></li>
<li class="chapter" data-level="11.1.7" data-path="codebook-2.html"><a href="codebook-2.html#r13pad5_sak"><i class="fa fa-check"></i><b>11.1.7</b> r13pad5_sak</a></li>
<li class="chapter" data-level="11.1.8" data-path="codebook-2.html"><a href="codebook-2.html#r13pad5_utfall"><i class="fa fa-check"></i><b>11.1.8</b> r13pad5_utfall</a></li>
<li class="chapter" data-level="11.1.9" data-path="codebook-2.html"><a href="codebook-2.html#r13pad5_vinner"><i class="fa fa-check"></i><b>11.1.9</b> r13pad5_vinner</a></li>
<li class="chapter" data-level="11.1.10" data-path="codebook-2.html"><a href="codebook-2.html#r13pad5_vinnermargin"><i class="fa fa-check"></i><b>11.1.10</b> r13pad5_vinnermargin</a></li>
<li class="chapter" data-level="11.1.11" data-path="codebook-2.html"><a href="codebook-2.html#r13pad6_ran"><i class="fa fa-check"></i><b>11.1.11</b> r13pad6_ran</a></li>
<li class="chapter" data-level="11.1.12" data-path="codebook-2.html"><a href="codebook-2.html#r13pad6a"><i class="fa fa-check"></i><b>11.1.12</b> r13pad6a</a></li>
<li class="chapter" data-level="11.1.13" data-path="codebook-2.html"><a href="codebook-2.html#r13pad6b"><i class="fa fa-check"></i><b>11.1.13</b> r13pad6b</a></li>
<li class="chapter" data-level="11.1.14" data-path="codebook-2.html"><a href="codebook-2.html#r13pad7a"><i class="fa fa-check"></i><b>11.1.14</b> r13pad7a</a></li>
<li class="chapter" data-level="11.1.15" data-path="codebook-2.html"><a href="codebook-2.html#r13pad7b"><i class="fa fa-check"></i><b>11.1.15</b> r13pad7b</a></li>
<li class="chapter" data-level="11.1.16" data-path="codebook-2.html"><a href="codebook-2.html#r13pad8a"><i class="fa fa-check"></i><b>11.1.16</b> r13pad8a</a></li>
<li class="chapter" data-level="11.1.17" data-path="codebook-2.html"><a href="codebook-2.html#r13pad8b"><i class="fa fa-check"></i><b>11.1.17</b> r13pad8b</a></li>
<li class="chapter" data-level="11.1.18" data-path="codebook-2.html"><a href="codebook-2.html#Scale_time"><i class="fa fa-check"></i><b>11.1.18</b> Scale_time</a></li>
<li class="chapter" data-level="11.1.19" data-path="codebook-2.html"><a href="codebook-2.html#time"><i class="fa fa-check"></i><b>11.1.19</b> time</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="codebook-2.html"><a href="codebook-2.html#missingness-report-2"><i class="fa fa-check"></i><b>11.2</b> Missingness report</a></li>
<li class="chapter" data-level="11.3" data-path="codebook-2.html"><a href="codebook-2.html#codebook-table-2"><i class="fa fa-check"></i><b>11.3</b> Codebook table</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="data-management-2.html"><a href="data-management-2.html"><i class="fa fa-check"></i><b>12</b> Data management</a></li>
<li class="chapter" data-level="13" data-path="main-effects-2.html"><a href="main-effects-2.html"><i class="fa fa-check"></i><b>13</b> Main effects</a></li>
<li class="chapter" data-level="14" data-path="effects-on-losers-2.html"><a href="effects-on-losers-2.html"><i class="fa fa-check"></i><b>14</b> Effects on losers</a></li>
<li class="chapter" data-level="15" data-path="effects-on-winners-1.html"><a href="effects-on-winners-1.html"><i class="fa fa-check"></i><b>15</b> Effects on winners</a></li>
<li class="chapter" data-level="16" data-path="worded-answer-scale.html"><a href="worded-answer-scale.html"><i class="fa fa-check"></i><b>16</b> Worded answer scale</a></li>
<li class="chapter" data-level="17" data-path="numbered-answer-scale.html"><a href="numbered-answer-scale.html"><i class="fa fa-check"></i><b>17</b> Numbered answer scale</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Good Loser</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="codebook" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Codebook</h1>
<blockquote>
<p>This chapter displays the codebook for the data set of the first Good Loser experiment, automatically generated using the R package “codebook”.</p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;codebook&quot;</span>)){<span class="kw">install.packages</span>(<span class="st">&quot;codebook&quot;</span>);  <span class="kw">library</span>(codebook)}</a></code></pre></div>
<pre><code>## Loading required package: codebook</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;haven&quot;</span>)){<span class="kw">install.packages</span>(<span class="st">&quot;haven&quot;</span>);  <span class="kw">library</span>(haven)}</a></code></pre></div>
<pre><code>## Loading required package: haven</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">d &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="st">&quot;Data/Goodloser-exp1-orig.sav&quot;</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">detect_missings</span>(d, <span class="dt">ninety_nine_problems =</span> <span class="ot">TRUE</span>, <span class="dt">negative_values_are_missing =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Warning: We renamed this function so as not to incorrectly pluralise
## the word &#39;missing&#39;.</code></pre>
<pre><code>## # A tibble: 1,019 x 14
##      Q64     Q63  S3_1_1  S3_2_1 S3_4_1_1 S3_4_1_2  S3_5_1 S3_6_1_1 S3_6_1_2
##    &lt;dbl&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl+lb&gt; &lt;dbl+lb&gt;
##  1    52 2 [Kvi… 1 [Jag… 5 [5]   1 [1 In…       NA 4 [4]   1 [1 My…       NA
##  2    30 2 [Kvi… 2 [Jag… 3 [3]   4 [4]          NA 4 [4]   5 [5]          NA
##  3    64 2 [Kvi… 1 [Jag… 4 [4]   5 [5]          NA 2 [2]   2 [2]          NA
##  4    43 2 [Kvi… 2 [Jag… 2 [2]   4 [4]          NA 4 [4]   7 [7 My…       NA
##  5    74 1 [Man] 2 [Jag… 7 [7 M… 4 [4]          NA 4 [4]   4 [4]          NA
##  6    51 2 [Kvi… 1 [Jag… 4 [4]   1 [1 In…       NA 1 [1 M… 4 [4]          NA
##  7    58 1 [Man] 2 [Jag… 7 [7 M… 7 [7 My…       NA 7 [7 M… 6 [6]          NA
##  8    55 1 [Man] 2 [Jag… 4 [4]   4 [4]          NA 4 [4]   6 [6]          NA
##  9    68 2 [Kvi… 2 [Jag… 3 [3]   3 [3]          NA 3 [3]   3 [3]          NA
## 10    32 1 [Man] 2 [Jag… 5 [5]   6 [6]          NA 6 [6]   5 [5]          NA
## # … with 1,009 more rows, and 5 more variables: S3_7_1_1 &lt;dbl+lbl&gt;,
## #   S3_7_1_2 &lt;dbl+lbl&gt;, S3_8_1_1 &lt;dbl+lbl&gt;, S3_8_1_2 &lt;dbl+lbl&gt;,
## #   Studie3sel &lt;dbl+lbl&gt;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">codebook</span>(d)</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">knitr<span class="op">::</span><span class="kw">asis_output</span>(data_info)</a></code></pre></div>
<div id="metadata" class="section level3">
<h3><span class="header-section-number">2.0.1</span> Metadata</h3>
<div id="description" class="section level4">
<h4><span class="header-section-number">2.0.1.1</span> Description</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="cf">if</span> (<span class="kw">exists</span>(<span class="st">&quot;name&quot;</span>, meta)) {</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  glue<span class="op">::</span><span class="kw">glue</span>(</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">    <span class="st">&quot;__Dataset name__: {name}&quot;</span>,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">    <span class="dt">.envir =</span> meta)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">}</a></code></pre></div>
<p><strong>Dataset name</strong>: d</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">cat</span>(description)</a></code></pre></div>
<p>The dataset has N=1019 rows and 14 columns.
0 rows have no missing values on any column.</p>
<details>
<p><summary title="Expand this section to see some additional metadata in a structured format that is useful for search engines">Metadata for search engines</summary></p>
<ul>
<li><strong>Date published</strong>: 2020-01-15</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">meta &lt;-<span class="st"> </span>meta[<span class="kw">setdiff</span>(<span class="kw">names</span>(meta),</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">                     <span class="kw">c</span>(<span class="st">&quot;creator&quot;</span>, <span class="st">&quot;datePublished&quot;</span>, <span class="st">&quot;identifier&quot;</span>,</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">                       <span class="st">&quot;url&quot;</span>, <span class="st">&quot;citation&quot;</span>, <span class="st">&quot;spatialCoverage&quot;</span>, </a>
<a class="sourceLine" id="cb12-4" data-line-number="4">                       <span class="st">&quot;temporalCoverage&quot;</span>, <span class="st">&quot;description&quot;</span>, <span class="st">&quot;name&quot;</span>))]</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">pander<span class="op">::</span><span class="kw">pander</span>(meta)</a></code></pre></div>
<ul>
<li><strong>keywords</strong>: <em>Q64</em>, <em>Q63</em>, <em>S3_1_1</em>, <em>S3_2_1</em>, <em>S3_4_1_1</em>, <em>S3_4_1_2</em>, <em>S3_5_1</em>, <em>S3_6_1_1</em>, <em>S3_6_1_2</em>, <em>S3_7_1_1</em>, <em>S3_7_1_2</em>, <em>S3_8_1_1</em>, <em>S3_8_1_2</em> and <em>Studie3sel</em></li>
</ul>
<!-- end of list -->
</details>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">knitr<span class="op">::</span><span class="kw">asis_output</span>(survey_overview)</a></code></pre></div>
</div>
</div>
<div id="variables" class="section level2">
<h2><span class="header-section-number">2.1</span> Variables</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="cf">if</span> (detailed_variables <span class="op">||</span><span class="st"> </span>detailed_scales) {</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">  knitr<span class="op">::</span><span class="kw">asis_output</span>(<span class="kw">paste0</span>(scales_items, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n\n\n</span><span class="st">&quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;</span><span class="ch">\n\n\n</span><span class="st">&quot;</span>))</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">}</a></code></pre></div>
<div id="Q64" class="section level3 tabset">
<h3><span class="header-section-number">2.1.1</span> Q64</h3>
<p>Ålder</p>
<div id="Q64_distribution" class="section level4">
<h4><span class="header-section-number">2.1.1.1</span> Distribution</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb15-18" data-line-number="18"></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb15-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb15-31" data-line-number="31"></a>
<a class="sourceLine" id="cb15-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb15-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb15-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb15-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb15-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb15-40" data-line-number="40"></a>
<a class="sourceLine" id="cb15-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb15-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb15-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb15-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb15-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb15-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb15-55" data-line-number="55"></a>
<a class="sourceLine" id="cb15-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb16-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_Q64_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>4 missing values.</p>
</div>
<div id="Q64_summary" class="section level4">
<h4><span class="header-section-number">2.1.1.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Q64</td>
<td align="left">Ålder</td>
<td align="left">numeric</td>
<td align="right">4</td>
<td align="right">0.9960746</td>
<td align="left">18</td>
<td align="left">54</td>
<td align="left">86</td>
<td align="right">52.45616</td>
<td align="right">17.73895</td>
<td align="left">▅▆▆▇▃</td>
<td align="left">F8.0</td>
<td align="left">10</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">}</a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">}</a></code></pre></div>
</div>
</div>
<div id="Q63" class="section level3 tabset">
<h3><span class="header-section-number">2.1.2</span> Q63</h3>
<p>Kön</p>
<div id="Q63_distribution" class="section level4">
<h4><span class="header-section-number">2.1.2.1</span> Distribution</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb22-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb22-18" data-line-number="18"></a>
<a class="sourceLine" id="cb22-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb22-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb22-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb22-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb22-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb22-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb22-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb22-31" data-line-number="31"></a>
<a class="sourceLine" id="cb22-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb22-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb22-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb22-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb22-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb22-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb22-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb22-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb22-40" data-line-number="40"></a>
<a class="sourceLine" id="cb22-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb22-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb22-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb22-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb22-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb22-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb22-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb22-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb22-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb22-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb22-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb22-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb22-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb22-55" data-line-number="55"></a>
<a class="sourceLine" id="cb22-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb23-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb23-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb23-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb23-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb23-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb23-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_Q63_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missing values.</p>
</div>
<div id="Q63_summary" class="section level4">
<h4><span class="header-section-number">2.1.2.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Q63</td>
<td align="left">Kön</td>
<td align="left">haven_labelled</td>
<td align="left">1. Man,<br>2. Kvinna</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">2</td>
<td align="left">2</td>
<td align="right">1.517174</td>
<td align="right">0.4999504</td>
<td align="right">2</td>
<td align="left">▇▁▁▁▁▁▁▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb27-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb27-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="Q63_labels" class="section level4">
<h4><span class="header-section-number">2.1.2.3</span> Value labels</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>Man</strong>: <em>1</em></li>
<li><strong>Kvinna</strong>: <em>2</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_1_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.3</span> S3_1_1</h3>
<p>I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor?</p>
<div id="S3_1_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.3.1</span> Distribution</h4>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb29-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb29-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb29-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb29-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb29-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb29-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb29-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb29-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb29-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb29-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb29-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb29-18" data-line-number="18"></a>
<a class="sourceLine" id="cb29-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb29-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb29-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb29-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb29-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb29-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb29-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb29-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb29-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb29-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb29-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb29-31" data-line-number="31"></a>
<a class="sourceLine" id="cb29-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb29-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb29-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb29-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb29-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb29-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb29-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb29-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb29-40" data-line-number="40"></a>
<a class="sourceLine" id="cb29-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb29-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb29-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb29-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb29-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb29-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb29-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb29-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb29-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb29-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb29-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb29-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb29-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb29-55" data-line-number="55"></a>
<a class="sourceLine" id="cb29-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb30-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb30-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb30-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb30-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb30-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb30-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb30-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb30-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb30-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_1_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missing values.</p>
</div>
<div id="S3_1_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.3.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_1_1</td>
<td align="left">I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor?</td>
<td align="left">haven_labelled</td>
<td align="left">1. Jag är huvudsakligen emot att förbjuda tiggeri i min kommun,<br>2. Jag är huvudsakligen för att förbjuda tiggeri i min kommun</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">2</td>
<td align="left">2</td>
<td align="right">1.563297</td>
<td align="right">0.4962208</td>
<td align="right">2</td>
<td align="left">▆▁▁▁▁▁▁▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb33-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb34-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb34-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb34-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_1_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.3.3</span> Value labels</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>Jag är huvudsakligen emot att förbjuda tiggeri i min kommun</strong>: <em>1</em></li>
<li><strong>Jag är huvudsakligen för att förbjuda tiggeri i min kommun</strong>: <em>2</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_2_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.4</span> S3_2_1</h3>
<p>Hur viktig är frågan för dig personligen?</p>
<div id="S3_2_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.4.1</span> Distribution</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb36-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb36-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb36-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb36-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb36-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb36-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb36-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb36-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb36-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb36-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb36-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb36-18" data-line-number="18"></a>
<a class="sourceLine" id="cb36-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb36-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb36-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb36-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb36-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb36-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb36-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb36-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb36-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb36-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb36-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb36-31" data-line-number="31"></a>
<a class="sourceLine" id="cb36-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb36-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb36-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb36-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb36-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb36-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb36-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb36-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb36-40" data-line-number="40"></a>
<a class="sourceLine" id="cb36-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb36-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb36-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb36-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb36-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb36-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb36-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb36-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb36-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb36-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb36-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb36-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb36-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb36-55" data-line-number="55"></a>
<a class="sourceLine" id="cb36-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb37-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb37-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb37-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb37-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb37-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb37-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb37-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb37-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb37-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb37-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb37-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb37-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_2_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missing values.</p>
</div>
<div id="S3_2_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.4.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb39-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_2_1</td>
<td align="left">Hur viktig är frågan för dig personligen?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Inte alls viktig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket viktig</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">7</td>
<td align="right">4.044161</td>
<td align="right">1.788693</td>
<td align="right">7</td>
<td align="left">▃▆▇▇▁▇▅▅</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb41-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb41-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb41-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb41-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb41-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_2_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.4.3</span> Value labels</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Inte alls viktig</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket viktig</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_4_1_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.5</span> S3_4_1_1</h3>
<p>Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?</p>
<div id="S3_4_1_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.5.1</span> Distribution</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb43-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb43-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb43-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb43-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb43-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb43-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb43-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb43-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb43-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb43-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb43-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb43-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb43-18" data-line-number="18"></a>
<a class="sourceLine" id="cb43-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb43-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb43-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb43-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb43-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb43-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb43-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb43-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb43-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb43-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb43-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb43-31" data-line-number="31"></a>
<a class="sourceLine" id="cb43-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb43-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb43-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb43-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb43-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb43-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb43-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb43-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb43-40" data-line-number="40"></a>
<a class="sourceLine" id="cb43-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb43-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb43-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb43-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb43-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb43-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb43-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb43-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb43-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb43-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb43-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb43-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb43-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb43-55" data-line-number="55"></a>
<a class="sourceLine" id="cb43-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb44-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb44-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb44-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb44-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb44-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb44-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb44-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb44-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb44-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb44-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb44-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb44-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb44-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_4_1_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>496 missing values.</p>
</div>
<div id="S3_4_1_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.5.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb46-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_4_1_1</td>
<td align="left">Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Inte alls rättvist,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket rättvist</td>
<td align="right">496</td>
<td align="right">0.5132483</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">7</td>
<td align="right">4.315488</td>
<td align="right">1.806196</td>
<td align="right">7</td>
<td align="left">▃▃▅▇▁▆▅▆</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb47-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb48-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb48-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb48-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb48-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb48-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb48-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb48-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb48-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_4_1_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.5.3</span> Value labels</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb49-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb49-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Inte alls rättvist</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket rättvist</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_4_1_2" class="section level3 tabset">
<h3><span class="header-section-number">2.1.6</span> S3_4_1_2</h3>
<p>Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?</p>
<div id="S3_4_1_2_distribution" class="section level4">
<h4><span class="header-section-number">2.1.6.1</span> Distribution</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb50-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb50-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb50-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb50-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb50-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb50-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb50-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb50-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb50-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb50-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb50-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb50-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb50-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb50-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb50-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb50-18" data-line-number="18"></a>
<a class="sourceLine" id="cb50-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb50-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb50-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb50-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb50-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb50-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb50-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb50-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb50-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb50-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb50-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb50-31" data-line-number="31"></a>
<a class="sourceLine" id="cb50-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb50-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb50-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb50-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb50-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb50-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb50-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb50-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb50-40" data-line-number="40"></a>
<a class="sourceLine" id="cb50-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb50-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb50-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb50-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb50-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb50-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb50-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb50-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb50-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb50-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb50-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb50-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb50-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb50-55" data-line-number="55"></a>
<a class="sourceLine" id="cb50-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb51-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb51-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb51-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb51-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb51-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb51-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb51-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb51-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb51-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb51-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb51-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb51-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb51-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_4_1_2_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>523 missing values.</p>
</div>
<div id="S3_4_1_2_summary" class="section level4">
<h4><span class="header-section-number">2.1.6.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb53-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb53-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_4_1_2</td>
<td align="left">Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Inte alls rättvist,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket rättvist</td>
<td align="right">523</td>
<td align="right">0.4867517</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">7</td>
<td align="right">4.397177</td>
<td align="right">1.889234</td>
<td align="right">7</td>
<td align="left">▃▂▅▇▁▅▅▆</td>
<td align="left">F1.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb55-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb55-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb55-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb55-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb55-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb55-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb55-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb55-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_4_1_2_labels" class="section level4">
<h4><span class="header-section-number">2.1.6.3</span> Value labels</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb56-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb56-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Inte alls rättvist</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket rättvist</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_5_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.7</span> S3_5_1</h3>
<p>Och hur schysst tycker du att beslutsproceduren var?</p>
<div id="S3_5_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.7.1</span> Distribution</h4>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb57-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb57-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb57-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb57-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb57-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb57-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb57-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb57-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb57-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb57-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb57-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb57-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb57-18" data-line-number="18"></a>
<a class="sourceLine" id="cb57-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb57-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb57-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb57-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb57-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb57-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb57-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb57-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb57-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb57-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb57-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb57-31" data-line-number="31"></a>
<a class="sourceLine" id="cb57-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb57-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb57-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb57-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb57-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb57-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb57-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb57-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb57-40" data-line-number="40"></a>
<a class="sourceLine" id="cb57-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb57-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb57-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb57-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb57-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb57-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb57-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb57-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb57-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb57-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb57-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb57-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb57-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb57-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb57-55" data-line-number="55"></a>
<a class="sourceLine" id="cb57-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb58-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb58-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb58-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb58-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb58-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb58-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb58-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb58-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb58-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb58-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb58-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb58-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb58-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_5_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missing values.</p>
</div>
<div id="S3_5_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.7.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb60-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb60-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_5_1</td>
<td align="left">Och hur schysst tycker du att beslutsproceduren var?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Mycket oschysst,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket schysst</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">7</td>
<td align="right">4.21001</td>
<td align="right">1.705491</td>
<td align="right">7</td>
<td align="left">▂▂▅▇▁▆▃▃</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb61-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb61-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb62-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb62-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb62-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb62-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb62-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb62-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb62-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_5_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.7.3</span> Value labels</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Mycket oschysst</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket schysst</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_6_1_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.8</span> S3_6_1_1</h3>
<p>Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?</p>
<div id="S3_6_1_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.8.1</span> Distribution</h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb64-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb64-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb64-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb64-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb64-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb64-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb64-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb64-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb64-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb64-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb64-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb64-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb64-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb64-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb64-18" data-line-number="18"></a>
<a class="sourceLine" id="cb64-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb64-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb64-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb64-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb64-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb64-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb64-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb64-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb64-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb64-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb64-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb64-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb64-31" data-line-number="31"></a>
<a class="sourceLine" id="cb64-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb64-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb64-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb64-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb64-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb64-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb64-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb64-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb64-40" data-line-number="40"></a>
<a class="sourceLine" id="cb64-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb64-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb64-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb64-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb64-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb64-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb64-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb64-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb64-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb64-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb64-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb64-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb64-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb64-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb64-55" data-line-number="55"></a>
<a class="sourceLine" id="cb64-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb65-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb65-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb65-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb65-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb65-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb65-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb65-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb65-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb65-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb65-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb65-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb65-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb65-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb65-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_6_1_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>496 missing values.</p>
</div>
<div id="S3_6_1_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.8.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb67-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_6_1_1</td>
<td align="left">Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Mycket dåligt,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket bra</td>
<td align="right">496</td>
<td align="right">0.5132483</td>
<td align="left">1</td>
<td align="left">5</td>
<td align="left">7</td>
<td align="right">4.380497</td>
<td align="right">2.125958</td>
<td align="right">7</td>
<td align="left">▆▃▃▆▁▅▆▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb68-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb69-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb69-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb69-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb69-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb69-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb69-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb69-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_6_1_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.8.3</span> Value labels</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb70-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Mycket dåligt</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket bra</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_6_1_2" class="section level3 tabset">
<h3><span class="header-section-number">2.1.9</span> S3_6_1_2</h3>
<p>Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?</p>
<div id="S3_6_1_2_distribution" class="section level4">
<h4><span class="header-section-number">2.1.9.1</span> Distribution</h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb71-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb71-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb71-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb71-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb71-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb71-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb71-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb71-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb71-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb71-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb71-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb71-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb71-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb71-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb71-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb71-18" data-line-number="18"></a>
<a class="sourceLine" id="cb71-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb71-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb71-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb71-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb71-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb71-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb71-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb71-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb71-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb71-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb71-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb71-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb71-31" data-line-number="31"></a>
<a class="sourceLine" id="cb71-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb71-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb71-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb71-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb71-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb71-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb71-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb71-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb71-40" data-line-number="40"></a>
<a class="sourceLine" id="cb71-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb71-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb71-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb71-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb71-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb71-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb71-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb71-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb71-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb71-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb71-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb71-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb71-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb71-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb71-55" data-line-number="55"></a>
<a class="sourceLine" id="cb71-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb72-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb72-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb72-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb72-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb72-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb72-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb72-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb72-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb72-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb72-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb72-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb72-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb72-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_6_1_2_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>523 missing values.</p>
</div>
<div id="S3_6_1_2_summary" class="section level4">
<h4><span class="header-section-number">2.1.9.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb74-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_6_1_2</td>
<td align="left">Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Mycket dåligt,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket bra</td>
<td align="right">523</td>
<td align="right">0.4867517</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">7</td>
<td align="right">3.921371</td>
<td align="right">2.011047</td>
<td align="right">7</td>
<td align="left">▇▆▇▇▁▅▅▇</td>
<td align="left">F1.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb75-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb75-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb76-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb76-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb76-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb76-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb76-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb76-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb76-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb76-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb76-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_6_1_2_labels" class="section level4">
<h4><span class="header-section-number">2.1.9.3</span> Value labels</h4>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb77-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb77-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Mycket dåligt</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket bra</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_7_1_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.10</span> S3_7_1_1</h3>
<p>Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?</p>
<div id="S3_7_1_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.10.1</span> Distribution</h4>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb78-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb78-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb78-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb78-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb78-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb78-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb78-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb78-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb78-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb78-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb78-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb78-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb78-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb78-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb78-18" data-line-number="18"></a>
<a class="sourceLine" id="cb78-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb78-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb78-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb78-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb78-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb78-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb78-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb78-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb78-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb78-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb78-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb78-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb78-31" data-line-number="31"></a>
<a class="sourceLine" id="cb78-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb78-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb78-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb78-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb78-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb78-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb78-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb78-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb78-40" data-line-number="40"></a>
<a class="sourceLine" id="cb78-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb78-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb78-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb78-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb78-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb78-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb78-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb78-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb78-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb78-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb78-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb78-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb78-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb78-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb78-55" data-line-number="55"></a>
<a class="sourceLine" id="cb78-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb79-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb79-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb79-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb79-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb79-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb79-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb79-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb79-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb79-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb79-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb79-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb79-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb79-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb79-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_7_1_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>496 missing values.</p>
</div>
<div id="S3_7_1_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.10.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb81-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb81-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_7_1_1</td>
<td align="left">Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Inte alls villig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket villig</td>
<td align="right">496</td>
<td align="right">0.5132483</td>
<td align="left">1</td>
<td align="left">6</td>
<td align="left">7</td>
<td align="right">5.10325</td>
<td align="right">1.966396</td>
<td align="right">7</td>
<td align="left">▂▁▂▃▁▃▃▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb82-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb83-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb83-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb83-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb83-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb83-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb83-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb83-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb83-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb83-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb83-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_7_1_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.10.3</span> Value labels</h4>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb84-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb84-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Inte alls villig</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket villig</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_7_1_2" class="section level3 tabset">
<h3><span class="header-section-number">2.1.11</span> S3_7_1_2</h3>
<p>Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?</p>
<div id="S3_7_1_2_distribution" class="section level4">
<h4><span class="header-section-number">2.1.11.1</span> Distribution</h4>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb85-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb85-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb85-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb85-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb85-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb85-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb85-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb85-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb85-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb85-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb85-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb85-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb85-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb85-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb85-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb85-18" data-line-number="18"></a>
<a class="sourceLine" id="cb85-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb85-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb85-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb85-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb85-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb85-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb85-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb85-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb85-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb85-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb85-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb85-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb85-31" data-line-number="31"></a>
<a class="sourceLine" id="cb85-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb85-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb85-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb85-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb85-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb85-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb85-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb85-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb85-40" data-line-number="40"></a>
<a class="sourceLine" id="cb85-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb85-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb85-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb85-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb85-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb85-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb85-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb85-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb85-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb85-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb85-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb85-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb85-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb85-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb85-55" data-line-number="55"></a>
<a class="sourceLine" id="cb85-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb86-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb86-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb86-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb86-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb86-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb86-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb86-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb86-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb86-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb86-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb86-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb86-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb86-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_7_1_2_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>523 missing values.</p>
</div>
<div id="S3_7_1_2_summary" class="section level4">
<h4><span class="header-section-number">2.1.11.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb88-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb88-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_7_1_2</td>
<td align="left">Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Inte alls villig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket villig</td>
<td align="right">523</td>
<td align="right">0.4867517</td>
<td align="left">1</td>
<td align="left">6</td>
<td align="left">7</td>
<td align="right">5.143145</td>
<td align="right">2.006473</td>
<td align="right">7</td>
<td align="left">▂▁▁▃▁▂▃▇</td>
<td align="left">F1.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb89-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb89-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb90-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb90-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb90-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb90-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb90-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb90-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb90-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb90-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb90-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_7_1_2_labels" class="section level4">
<h4><span class="header-section-number">2.1.11.3</span> Value labels</h4>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb91-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb91-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Inte alls villig</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Mycket villig</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_8_1_1" class="section level3 tabset">
<h3><span class="header-section-number">2.1.12</span> S3_8_1_1</h3>
<p>När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?</p>
<div id="S3_8_1_1_distribution" class="section level4">
<h4><span class="header-section-number">2.1.12.1</span> Distribution</h4>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb92-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb92-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb92-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb92-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb92-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb92-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb92-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb92-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb92-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb92-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb92-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb92-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb92-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb92-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb92-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb92-18" data-line-number="18"></a>
<a class="sourceLine" id="cb92-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb92-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb92-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb92-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb92-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb92-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb92-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb92-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb92-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb92-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb92-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb92-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb92-31" data-line-number="31"></a>
<a class="sourceLine" id="cb92-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb92-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb92-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb92-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb92-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb92-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb92-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb92-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb92-40" data-line-number="40"></a>
<a class="sourceLine" id="cb92-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb92-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb92-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb92-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb92-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb92-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb92-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb92-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb92-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb92-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb92-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb92-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb92-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb92-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb92-55" data-line-number="55"></a>
<a class="sourceLine" id="cb92-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb93-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb93-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb93-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb93-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb93-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb93-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb93-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb93-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb93-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb93-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb93-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb93-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb93-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb93-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb93-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_8_1_1_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>496 missing values.</p>
</div>
<div id="S3_8_1_1_summary" class="section level4">
<h4><span class="header-section-number">2.1.12.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb95-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_8_1_1</td>
<td align="left">När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Kommer absolut att motarbeta beslutet,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Kommer absolut att följa beslutet</td>
<td align="right">496</td>
<td align="right">0.5132483</td>
<td align="left">1</td>
<td align="left">6</td>
<td align="left">7</td>
<td align="right">5.175908</td>
<td align="right">1.851693</td>
<td align="right">7</td>
<td align="left">▁▁▂▃▁▂▃▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb96-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb96-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb97-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb97-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb97-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb97-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb97-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb97-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb97-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb97-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_8_1_1_labels" class="section level4">
<h4><span class="header-section-number">2.1.12.3</span> Value labels</h4>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb98-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb98-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Kommer absolut att motarbeta beslutet</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Kommer absolut att följa beslutet</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="S3_8_1_2" class="section level3 tabset">
<h3><span class="header-section-number">2.1.13</span> S3_8_1_2</h3>
<p>När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?</p>
<div id="S3_8_1_2_distribution" class="section level4">
<h4><span class="header-section-number">2.1.13.1</span> Distribution</h4>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb99-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb99-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb99-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb99-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb99-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb99-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb99-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb99-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb99-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb99-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb99-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb99-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb99-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb99-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb99-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb99-18" data-line-number="18"></a>
<a class="sourceLine" id="cb99-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb99-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb99-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb99-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb99-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb99-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb99-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb99-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb99-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb99-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb99-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb99-31" data-line-number="31"></a>
<a class="sourceLine" id="cb99-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb99-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb99-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb99-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb99-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb99-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb99-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb99-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb99-40" data-line-number="40"></a>
<a class="sourceLine" id="cb99-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb99-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb99-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb99-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb99-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb99-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb99-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb99-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb99-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb99-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb99-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb99-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb99-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb99-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb99-55" data-line-number="55"></a>
<a class="sourceLine" id="cb99-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb100-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb100-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb100-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb100-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb100-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb100-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb100-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb100-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb100-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb100-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb100-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb100-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb100-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb100-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb100-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_S3_8_1_2_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>523 missing values.</p>
</div>
<div id="S3_8_1_2_summary" class="section level4">
<h4><span class="header-section-number">2.1.13.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb102-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb102-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S3_8_1_2</td>
<td align="left">När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?</td>
<td align="left">haven_labelled</td>
<td align="left">1. 1 Kommer absolut att motarbeta beslutet,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Kommer absolut att följa beslutet</td>
<td align="right">523</td>
<td align="right">0.4867517</td>
<td align="left">1</td>
<td align="left">5</td>
<td align="left">7</td>
<td align="right">5.094758</td>
<td align="right">1.866529</td>
<td align="right">7</td>
<td align="left">▁▁▂▅▁▂▃▇</td>
<td align="left">F1.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb103-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb103-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb104-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb104-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb104-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb104-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb104-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb104-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb104-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb104-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb104-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb104-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="S3_8_1_2_labels" class="section level4">
<h4><span class="header-section-number">2.1.13.3</span> Value labels</h4>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb105-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb105-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>1 Kommer absolut att motarbeta beslutet</strong>: <em>1</em></li>
<li><strong>2</strong>: <em>2</em></li>
<li><strong>3</strong>: <em>3</em></li>
<li><strong>4</strong>: <em>4</em></li>
<li><strong>5</strong>: <em>5</em></li>
<li><strong>6</strong>: <em>6</em></li>
<li><strong>7 Kommer absolut att följa beslutet</strong>: <em>7</em></li>
</ul>
<!-- end of list -->
</div>
</div>
<div id="Studie3sel" class="section level3 tabset">
<h3><span class="header-section-number">2.1.14</span> Studie3sel</h3>
<p>Manipulation</p>
<div id="Studie3sel_distribution" class="section level4">
<h4><span class="header-section-number">2.1.14.1</span> Distribution</h4>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">show_missing_values &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">has_labels</span>(item)) {</a>
<a class="sourceLine" id="cb106-3" data-line-number="3">  missing_values &lt;-<span class="st"> </span>item[<span class="kw">is.na</span>(haven<span class="op">::</span><span class="kw">zap_missing</span>(item))]</a>
<a class="sourceLine" id="cb106-4" data-line-number="4">  <span class="kw">attributes</span>(missing_values) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb106-5" data-line-number="5">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)) {</a>
<a class="sourceLine" id="cb106-6" data-line-number="6">    <span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels[<span class="kw">is.na</span>(<span class="kw">attributes</span>(missing_values)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb106-7" data-line-number="7">    <span class="kw">attributes</span>(item)<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)<span class="op">$</span>labels[<span class="op">!</span><span class="kw">is.na</span>(<span class="kw">attributes</span>(item)<span class="op">$</span>labels)]</a>
<a class="sourceLine" id="cb106-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb106-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.double</span>(item)) {</a>
<a class="sourceLine" id="cb106-10" data-line-number="10">    show_missing_values &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(haven<span class="op">::</span><span class="kw">na_tag</span>(missing_values))) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb106-11" data-line-number="11">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_missing</span>(item)</a>
<a class="sourceLine" id="cb106-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb106-13" data-line-number="13">  <span class="cf">if</span> (<span class="kw">length</span>(item_attributes<span class="op">$</span>labels) <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.numeric</span>(item)) {</a>
<a class="sourceLine" id="cb106-14" data-line-number="14">    item &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">zap_labels</span>(item)</a>
<a class="sourceLine" id="cb106-15" data-line-number="15">  }</a>
<a class="sourceLine" id="cb106-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb106-17" data-line-number="17">item_nomiss &lt;-<span class="st"> </span>item[<span class="op">!</span><span class="kw">is.na</span>(item)]</a>
<a class="sourceLine" id="cb106-18" data-line-number="18"></a>
<a class="sourceLine" id="cb106-19" data-line-number="19"><span class="co"># unnest mc_multiple and so on</span></a>
<a class="sourceLine" id="cb106-20" data-line-number="20"><span class="cf">if</span> (</a>
<a class="sourceLine" id="cb106-21" data-line-number="21">  <span class="kw">is.character</span>(item_nomiss) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb106-22" data-line-number="22"><span class="st">  </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_nomiss, stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>))) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb106-23" data-line-number="23"><span class="st">  </span><span class="op">!</span><span class="kw">is.null</span>(item_info) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb106-24" data-line-number="24"><span class="st">  </span>(<span class="kw">exists</span>(<span class="st">&quot;type&quot;</span>, item_info) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-25" data-line-number="25"><span class="st">    </span><span class="kw">any</span>(stringr<span class="op">::</span><span class="kw">str_detect</span>(item_info<span class="op">$</span>type, </a>
<a class="sourceLine" id="cb106-26" data-line-number="26">                            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;multiple&quot;</span>))))</a>
<a class="sourceLine" id="cb106-27" data-line-number="27">  ) {</a>
<a class="sourceLine" id="cb106-28" data-line-number="28">  item_nomiss &lt;-<span class="st"> </span><span class="kw">unlist</span>(stringr<span class="op">::</span><span class="kw">str_split</span>(item_nomiss, <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">fixed</span>(<span class="st">&quot;, &quot;</span>)))</a>
<a class="sourceLine" id="cb106-29" data-line-number="29">}</a>
<a class="sourceLine" id="cb106-30" data-line-number="30"><span class="kw">attributes</span>(item_nomiss) &lt;-<span class="st"> </span><span class="kw">attributes</span>(item)</a>
<a class="sourceLine" id="cb106-31" data-line-number="31"></a>
<a class="sourceLine" id="cb106-32" data-line-number="32">old_height &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.height&quot;</span>)</a>
<a class="sourceLine" id="cb106-33" data-line-number="33">non_missing_choices &lt;-<span class="st"> </span>item_attributes[[<span class="st">&quot;labels&quot;</span>]]</a>
<a class="sourceLine" id="cb106-34" data-line-number="34">many_labels &lt;-<span class="st"> </span><span class="kw">length</span>(non_missing_choices) <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb106-35" data-line-number="35">go_vertical &lt;-<span class="st"> </span><span class="op">!</span><span class="kw">is_numeric_or_time_var</span>(item_nomiss) <span class="op">||</span><span class="st"> </span>many_labels</a>
<a class="sourceLine" id="cb106-36" data-line-number="36">  </a>
<a class="sourceLine" id="cb106-37" data-line-number="37"><span class="cf">if</span> ( go_vertical ) {</a>
<a class="sourceLine" id="cb106-38" data-line-number="38">  <span class="co"># numeric items are plotted horizontally (because that&#39;s what usually expected)</span></a>
<a class="sourceLine" id="cb106-39" data-line-number="39">  <span class="co"># categorical items are plotted vertically because we can use the screen real estate better this way</span></a>
<a class="sourceLine" id="cb106-40" data-line-number="40"></a>
<a class="sourceLine" id="cb106-41" data-line-number="41">    <span class="cf">if</span> (<span class="kw">is.null</span>(choices) <span class="op">||</span><span class="st"> </span></a>
<a class="sourceLine" id="cb106-42" data-line-number="42"><span class="st">        </span>dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss) <span class="op">&gt;</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)) {</a>
<a class="sourceLine" id="cb106-43" data-line-number="43">        non_missing_choices &lt;-<span class="st"> </span><span class="kw">unique</span>(item_nomiss)</a>
<a class="sourceLine" id="cb106-44" data-line-number="44">        <span class="kw">names</span>(non_missing_choices) &lt;-<span class="st"> </span>non_missing_choices</a>
<a class="sourceLine" id="cb106-45" data-line-number="45">    }</a>
<a class="sourceLine" id="cb106-46" data-line-number="46">  choice_multiplier &lt;-<span class="st"> </span>old_height<span class="op">/</span><span class="fl">6.5</span></a>
<a class="sourceLine" id="cb106-47" data-line-number="47">    new_height &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>choice_multiplier <span class="op">*</span><span class="st"> </span><span class="kw">length</span>(non_missing_choices)</a>
<a class="sourceLine" id="cb106-48" data-line-number="48">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>, <span class="dv">20</span>, new_height)</a>
<a class="sourceLine" id="cb106-49" data-line-number="49">    new_height &lt;-<span class="st"> </span><span class="kw">ifelse</span>(new_height <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, new_height)</a>
<a class="sourceLine" id="cb106-50" data-line-number="50">    <span class="cf">if</span>(<span class="kw">could_disclose_unique_values</span>(item_nomiss) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb106-51" data-line-number="51">      new_height &lt;-<span class="st"> </span>old_height</a>
<a class="sourceLine" id="cb106-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb106-53" data-line-number="53">    knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> new_height)</a>
<a class="sourceLine" id="cb106-54" data-line-number="54">}</a>
<a class="sourceLine" id="cb106-55" data-line-number="55"></a>
<a class="sourceLine" id="cb106-56" data-line-number="56">wrap_at &lt;-<span class="st"> </span>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">get</span>(<span class="st">&quot;fig.width&quot;</span>) <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="co"># todo: if there are free-text choices mingled in with the pre-defined ones, don&#39;t show</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="co"># todo: show rare items if they are pre-defined</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"><span class="co"># todo: bin rare responses into &quot;other category&quot;</span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">length</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb107-5" data-line-number="5">  <span class="kw">cat</span>(<span class="st">&quot;No non-missing values to show.&quot;</span>)</a>
<a class="sourceLine" id="cb107-6" data-line-number="6">} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="kw">could_disclose_unique_values</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb107-7" data-line-number="7">  <span class="kw">plot_labelled</span>(item_nomiss, item_name, wrap_at, go_vertical)</a>
<a class="sourceLine" id="cb107-8" data-line-number="8">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb107-9" data-line-number="9">  <span class="cf">if</span> (<span class="kw">is.character</span>(item_nomiss)) {</a>
<a class="sourceLine" id="cb107-10" data-line-number="10">      char_count &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_count</span>(item_nomiss)</a>
<a class="sourceLine" id="cb107-11" data-line-number="11">      <span class="kw">attributes</span>(char_count)<span class="op">$</span>label &lt;-<span class="st"> </span>item_label</a>
<a class="sourceLine" id="cb107-12" data-line-number="12">      <span class="kw">plot_labelled</span>(char_count, </a>
<a class="sourceLine" id="cb107-13" data-line-number="13">                    item_name, wrap_at, <span class="ot">FALSE</span>, <span class="dt">trans =</span> <span class="st">&quot;log1p&quot;</span>, <span class="st">&quot;characters&quot;</span>)</a>
<a class="sourceLine" id="cb107-14" data-line-number="14">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb107-15" data-line-number="15">      <span class="kw">cat</span>(dplyr<span class="op">::</span><span class="kw">n_distinct</span>(item_nomiss), <span class="st">&quot; unique, categorical values, so not shown.&quot;</span>)</a>
<a class="sourceLine" id="cb107-16" data-line-number="16">  }</a>
<a class="sourceLine" id="cb107-17" data-line-number="17">}</a></code></pre></div>
<p><img src="Goodloser-appendix_files/figure-html/cb_d_Studie3sel_distribution-1.png" width="672" /></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">fig.height =</span> old_height)</a></code></pre></div>
<p>0 missing values.</p>
</div>
<div id="Studie3sel_summary" class="section level4">
<h4><span class="header-section-number">2.1.14.2</span> Summary statistics</h4>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">attributes</span>(item) &lt;-<span class="st"> </span>item_attributes</a>
<a class="sourceLine" id="cb109-2" data-line-number="2">df =<span class="st"> </span><span class="kw">data.frame</span>(item, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="kw">names</span>(df) =<span class="st"> </span>html_item_name</a>
<a class="sourceLine" id="cb109-4" data-line-number="4"><span class="kw">escaped_table</span>(<span class="kw">codebook_table</span>(df))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">label</th>
<th align="left">data_type</th>
<th align="left">value_labels</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">min</th>
<th align="left">median</th>
<th align="left">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">n_value_labels</th>
<th align="left">hist</th>
<th align="left">format.spss</th>
<th align="left">display_width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Studie3sel</td>
<td align="left">Manipulation</td>
<td align="left">haven_labelled</td>
<td align="left">1. förbjuda tiggeri, beslutet är fel,<br>2. förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,<br>3. förbjuda tiggeri,<br>4. inte förbjuda tiggeri, beslutet är fel,<br>5. inte förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,<br>6. inte förbjuda tiggeri</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">1</td>
<td align="left">3</td>
<td align="left">6</td>
<td align="right">3.438665</td>
<td align="right">1.707178</td>
<td align="right">6</td>
<td align="left">▇▇▁▇▇▁▇▇</td>
<td align="left">F1.0</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="cf">if</span> (show_missing_values) {</a>
<a class="sourceLine" id="cb110-2" data-line-number="2">  <span class="kw">plot_labelled</span>(missing_values, item_name, wrap_at)</a>
<a class="sourceLine" id="cb110-3" data-line-number="3">}</a></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(item_info)) {</a>
<a class="sourceLine" id="cb111-2" data-line-number="2">  <span class="co"># don&#39;t show choices again, if they&#39;re basically same thing as value labels</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.null</span>(item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4"><span class="st">    </span><span class="kw">all</span>(<span class="kw">names</span>(<span class="kw">na.omit</span>(choices)) <span class="op">==</span><span class="st"> </span>item_info<span class="op">$</span>choices) <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5"><span class="st">    </span><span class="kw">all</span>(<span class="kw">na.omit</span>(choices) <span class="op">==</span><span class="st"> </span><span class="kw">names</span>(item_info<span class="op">$</span>choices))) {</a>
<a class="sourceLine" id="cb111-6" data-line-number="6">    item_info<span class="op">$</span>choices &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb111-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb111-8" data-line-number="8">  item_info<span class="op">$</span>label_parsed &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb111-9" data-line-number="9"><span class="st">    </span>item_info<span class="op">$</span>choice_list &lt;-<span class="st"> </span>item_info<span class="op">$</span>study_id &lt;-<span class="st"> </span>item_info<span class="op">$</span>id &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb111-10" data-line-number="10">  pander<span class="op">::</span><span class="kw">pander</span>(item_info)</a>
<a class="sourceLine" id="cb111-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="Studie3sel_labels" class="section level4">
<h4><span class="header-section-number">2.1.14.3</span> Value labels</h4>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(choices) <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>) {</a>
<a class="sourceLine" id="cb112-2" data-line-number="2">    pander<span class="op">::</span><span class="kw">pander</span>(<span class="kw">as.list</span>(choices))</a>
<a class="sourceLine" id="cb112-3" data-line-number="3">}</a></code></pre></div>
<ul>
<li><strong>förbjuda tiggeri, beslutet är fel</strong>: <em>1</em></li>
<li><strong>förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati</strong>: <em>2</em></li>
<li><strong>förbjuda tiggeri</strong>: <em>3</em></li>
<li><strong>inte förbjuda tiggeri, beslutet är fel</strong>: <em>4</em></li>
<li><strong>inte förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati</strong>: <em>5</em></li>
<li><strong>inte förbjuda tiggeri</strong>: <em>6</em></li>
</ul>
<!-- end of list -->
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">missingness_report</a></code></pre></div>
</div>
</div>
</div>
<div id="missingness-report" class="section level2">
<h2><span class="header-section-number">2.2</span> Missingness report</h2>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="cf">if</span> (<span class="kw">length</span>(md_pattern)) {</a>
<a class="sourceLine" id="cb114-2" data-line-number="2">  <span class="cf">if</span> (knitr<span class="op">::</span><span class="kw">is_html_output</span>()) {</a>
<a class="sourceLine" id="cb114-3" data-line-number="3">    rmarkdown<span class="op">::</span><span class="kw">paged_table</span>(md_pattern, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">rows.print =</span> <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb114-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb114-5" data-line-number="5">    knitr<span class="op">::</span><span class="kw">kable</span>(md_pattern)</a>
<a class="sourceLine" id="cb114-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb114-7" data-line-number="7">}</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["description"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Q64"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["S3_4_1_1"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["S3_6_1_1"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["S3_7_1_1"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["S3_8_1_1"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["S3_4_1_2"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["S3_6_1_2"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["S3_7_1_2"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["S3_8_1_2"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["var_miss"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["n_miss"],"name":[12],"type":["dbl"],"align":["right"]}],"data":[{"1":"Missing values per variable","2":"4","3":"496","4":"496","5":"496","6":"496","7":"523","8":"523","9":"523","10":"523","11":"4080","12":"4080"},{"1":"Missing values in 4 variables","2":"1","3":"1","4":"1","5":"1","6":"1","7":"0","8":"0","9":"0","10":"0","11":"4","12":"522"},{"1":"Missing values in 4 variables","2":"1","3":"0","4":"0","5":"0","6":"0","7":"1","8":"1","9":"1","10":"1","11":"4","12":"493"},{"1":"2 other, less frequent patterns","2":"0","3":"1","4":"1","5":"1","6":"1","7":"1","8":"1","9":"1","10":"1","11":"10","12":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">items</a></code></pre></div>
</div>
<div id="codebook-table" class="section level2">
<h2><span class="header-section-number">2.3</span> Codebook table</h2>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">export_table</span>(metadata_table)</a></code></pre></div>
<div id="htmlwidget-5693833f672d398820ae" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5693833f672d398820ae">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0\" data-max=\"523\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0.48675171736997\" data-max=\"1\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1.51717369970559\" data-max=\"52.456157635468\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"0.496220806995763\" data-max=\"17.7389518638945\" data-scale=\"15\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2\" data-max=\"7\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons"],"data":[["<a href=\"#Q64\">Q64<\/a>","<a href=\"#Q63\">Q63<\/a>","<a href=\"#S3_1_1\">S3_1_1<\/a>","<a href=\"#S3_2_1\">S3_2_1<\/a>","<a href=\"#S3_4_1_1\">S3_4_1_1<\/a>","<a href=\"#S3_4_1_2\">S3_4_1_2<\/a>","<a href=\"#S3_5_1\">S3_5_1<\/a>","<a href=\"#S3_6_1_1\">S3_6_1_1<\/a>","<a href=\"#S3_6_1_2\">S3_6_1_2<\/a>","<a href=\"#S3_7_1_1\">S3_7_1_1<\/a>","<a href=\"#S3_7_1_2\">S3_7_1_2<\/a>","<a href=\"#S3_8_1_1\">S3_8_1_1<\/a>","<a href=\"#S3_8_1_2\">S3_8_1_2<\/a>","<a href=\"#Studie3sel\">Studie3sel<\/a>"],["Ålder","Kön","I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor?","Hur viktig är frågan för dig personligen?","Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?","Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?","Och hur schysst tycker du att beslutsproceduren var?","Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?","Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?","Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?","Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?","När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?","När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?","Manipulation"],["numeric","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled","haven_labelled"],[null,"1. Man,<br>2. Kvinna","1. Jag är huvudsakligen emot att förbjuda tiggeri i min kommun,<br>2. Jag är huvudsakligen för att förbjuda tiggeri i min kommun","1. 1 Inte alls viktig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket viktig","1. 1 Inte alls rättvist,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket rättvist","1. 1 Inte alls rättvist,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket rättvist","1. 1 Mycket oschysst,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket schysst","1. 1 Mycket dåligt,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket bra","1. 1 Mycket dåligt,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket bra","1. 1 Inte alls villig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket villig","1. 1 Inte alls villig,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Mycket villig","1. 1 Kommer absolut att motarbeta beslutet,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Kommer absolut att följa beslutet","1. 1 Kommer absolut att motarbeta beslutet,<br>2. 2,<br>3. 3,<br>4. 4,<br>5. 5,<br>6. 6,<br>7. 7 Kommer absolut att följa beslutet","1. förbjuda tiggeri, beslutet är fel,<br>2. förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,<br>3. förbjuda tiggeri,<br>4. inte förbjuda tiggeri, beslutet är fel,<br>5. inte förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,<br>6. inte förbjuda tiggeri"],[4,0,0,0,496,523,0,496,523,496,523,496,523,0],[0.996074582924436,1,1,1,0.513248282630029,0.486751717369971,1,0.513248282630029,0.486751717369971,0.513248282630029,0.486751717369971,0.513248282630029,0.486751717369971,1],["18","1","1","1","1","1","1","1","1","1","1","1","1","1"],["54","2","2","4","4","4","4","5","4","6","6","6","5","3"],["86","2","2","7","7","7","7","7","7","7","7","7","7","6"],[52.456157635468,1.51717369970559,1.56329735034347,4.0441609421001,4.31548757170172,4.39717741935484,4.21000981354269,4.38049713193117,3.92137096774194,5.10325047801147,5.14314516129032,5.17590822179732,5.09475806451613,3.43866535819431],[17.7389518638945,0.499950351420237,0.496220806995763,1.78869313775905,1.8061965237781,1.88923374365264,1.70549150596459,2.12595755786116,2.01104699990883,1.96639608219786,2.00647270458363,1.85169304511387,1.86652941647355,1.70717789647802],[null,2,2,7,7,7,7,7,7,7,7,7,7,6],["▅▆▆▇▃","▇▁▁▁▁▁▁▇","▆▁▁▁▁▁▁▇","▃▆▇▇▁▇▅▅","▃▃▅▇▁▆▅▆","▃▂▅▇▁▅▅▆","▂▂▅▇▁▆▃▃","▆▃▃▆▁▅▆▇","▇▆▇▇▁▅▅▇","▂▁▂▃▁▃▃▇","▂▁▁▃▁▂▃▇","▁▁▂▃▁▂▃▇","▁▁▂▅▁▂▃▇","▇▇▁▇▇▁▇▇"],["F8.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0","F1.0"],["10","12","12","12","12",null,"12","12",null,"12",null,"12",null,"12"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>name<\/th>\n      <th>label<\/th>\n      <th>data_type<\/th>\n      <th>value_labels<\/th>\n      <th>n_missing<\/th>\n      <th>complete_rate<\/th>\n      <th>min<\/th>\n      <th>median<\/th>\n      <th>max<\/th>\n      <th>mean<\/th>\n      <th>sd<\/th>\n      <th>n_value_labels<\/th>\n      <th>hist<\/th>\n      <th>format.spss<\/th>\n      <th>display_width<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","csv","excel","pdf","print"],"pageLength":200,"columnDefs":[{"className":"dt-right","targets":[4,5,9,10,11]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[10,25,50,100,200]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1">jsonld</a></code></pre></div>
<script type="application/ld+json">
{
  "name": "d",
  "datePublished": "2020-01-15",
  "description": "The dataset has N=1019 rows and 14 columns.\n0 rows have no missing values on any column.\n\n\n## Table of variables\nThis table contains variable names, labels, and number of missing values.\nSee the complete codebook for more.\n\n|name       |label                                                                                                                                                          | n_missing|\n|:----------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------|---------:|\n|Q64        |Ålder                                                                                                                                                          |         4|\n|Q63        |Kön                                                                                                                                                            |         0|\n|S3_1_1     |I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor? |         0|\n|S3_2_1     |Hur viktig är frågan för dig personligen?                                                                                                                      |         0|\n|S3_4_1_1   |Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?                                                                      |       496|\n|S3_4_1_2   |Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?                                                                 |       523|\n|S3_5_1     |Och hur schysst tycker du att beslutsproceduren var?                                                                                                           |         0|\n|S3_6_1_1   |Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?                                                              |       496|\n|S3_6_1_2   |Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?                                                         |       523|\n|S3_7_1_1   |Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?                                                                                        |       496|\n|S3_7_1_2   |Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?                                                                                   |       523|\n|S3_8_1_1   |När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?                                                   |       496|\n|S3_8_1_2   |När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?                                              |       523|\n|Studie3sel |Manipulation                                                                                                                                                   |         0|\n\n### Note\nThis dataset was automatically described using the [codebook R package](https://rubenarslan.github.io/codebook/) (version 0.8.2).",
  "keywords": ["Q64", "Q63", "S3_1_1", "S3_2_1", "S3_4_1_1", "S3_4_1_2", "S3_5_1", "S3_6_1_1", "S3_6_1_2", "S3_7_1_1", "S3_7_1_2", "S3_8_1_1", "S3_8_1_2", "Studie3sel"],
  "@context": "http://schema.org/",
  "@type": "Dataset",
  "variableMeasured": [
    {
      "name": "Q64",
      "description": "Ålder",
      "@type": "propertyValue"
    },
    {
      "name": "Q63",
      "description": "Kön",
      "value": "1. Man,\n2. Kvinna",
      "maxValue": 2,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_1_1",
      "description": "I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor?",
      "value": "1. Jag är huvudsakligen emot att förbjuda tiggeri i min kommun,\n2. Jag är huvudsakligen för att förbjuda tiggeri i min kommun",
      "maxValue": 2,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_2_1",
      "description": "Hur viktig är frågan för dig personligen?",
      "value": "1. 1 Inte alls viktig,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket viktig",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_4_1_1",
      "description": "Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?",
      "value": "1. 1 Inte alls rättvist,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket rättvist",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_4_1_2",
      "description": "Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?",
      "value": "1. 1 Inte alls rättvist,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket rättvist",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_5_1",
      "description": "Och hur schysst tycker du att beslutsproceduren var?",
      "value": "1. 1 Mycket oschysst,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket schysst",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_6_1_1",
      "description": "Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?",
      "value": "1. 1 Mycket dåligt,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket bra",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_6_1_2",
      "description": "Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?",
      "value": "1. 1 Mycket dåligt,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket bra",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_7_1_1",
      "description": "Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?",
      "value": "1. 1 Inte alls villig,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket villig",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_7_1_2",
      "description": "Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?",
      "value": "1. 1 Inte alls villig,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Mycket villig",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_8_1_1",
      "description": "När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?",
      "value": "1. 1 Kommer absolut att motarbeta beslutet,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Kommer absolut att följa beslutet",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "S3_8_1_2",
      "description": "När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?",
      "value": "1. 1 Kommer absolut att motarbeta beslutet,\n2. 2,\n3. 3,\n4. 4,\n5. 5,\n6. 6,\n7. 7 Kommer absolut att följa beslutet",
      "maxValue": 7,
      "minValue": 1,
      "@type": "propertyValue"
    },
    {
      "name": "Studie3sel",
      "description": "Manipulation",
      "value": "1. förbjuda tiggeri, beslutet är fel,\n2. förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,\n3. förbjuda tiggeri,\n4. inte förbjuda tiggeri, beslutet är fel,\n5. inte förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,\n6. inte förbjuda tiggeri",
      "maxValue": 6,
      "minValue": 1,
      "@type": "propertyValue"
    }
  ]
}
</script>
<details>
<p><summary>JSON-LD metadata</summary>
The following JSON-LD can be found by search engines, if you share this codebook
publicly on the web.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;d&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-3" data-line-number="3">  <span class="dt">&quot;datePublished&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-01-15&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-4" data-line-number="4">  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;The dataset has N=1019 rows and 14 columns.</span><span class="ch">\n</span><span class="st">0 rows have no missing values on any column.</span><span class="ch">\n\n\n</span><span class="st">## Table of variables</span><span class="ch">\n</span><span class="st">This table contains variable names, labels, and number of missing values.</span><span class="ch">\n</span><span class="st">See the complete codebook for more.</span><span class="ch">\n\n</span><span class="st">|name       |label                                                                                                                                                          | n_missing|</span><span class="ch">\n</span><span class="st">|:----------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------|---------:|</span><span class="ch">\n</span><span class="st">|Q64        |Ålder                                                                                                                                                          |         4|</span><span class="ch">\n</span><span class="st">|Q63        |Kön                                                                                                                                                            |         0|</span><span class="ch">\n</span><span class="st">|S3_1_1     |I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor? |         0|</span><span class="ch">\n</span><span class="st">|S3_2_1     |Hur viktig är frågan för dig personligen?                                                                                                                      |         0|</span><span class="ch">\n</span><span class="st">|S3_4_1_1   |Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?                                                                      |       496|</span><span class="ch">\n</span><span class="st">|S3_4_1_2   |Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?                                                                 |       523|</span><span class="ch">\n</span><span class="st">|S3_5_1     |Och hur schysst tycker du att beslutsproceduren var?                                                                                                           |         0|</span><span class="ch">\n</span><span class="st">|S3_6_1_1   |Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?                                                              |       496|</span><span class="ch">\n</span><span class="st">|S3_6_1_2   |Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?                                                         |       523|</span><span class="ch">\n</span><span class="st">|S3_7_1_1   |Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?                                                                                        |       496|</span><span class="ch">\n</span><span class="st">|S3_7_1_2   |Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?                                                                                   |       523|</span><span class="ch">\n</span><span class="st">|S3_8_1_1   |När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?                                                   |       496|</span><span class="ch">\n</span><span class="st">|S3_8_1_2   |När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?                                              |       523|</span><span class="ch">\n</span><span class="st">|Studie3sel |Manipulation                                                                                                                                                   |         0|</span><span class="ch">\n\n</span><span class="st">### Note</span><span class="ch">\n</span><span class="st">This dataset was automatically described using the [codebook R package](https://rubenarslan.github.io/codebook/) (version 0.8.2).&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5">  <span class="dt">&quot;keywords&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;Q64&quot;</span><span class="ot">,</span> <span class="st">&quot;Q63&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_1_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_2_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_4_1_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_4_1_2&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_5_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_6_1_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_6_1_2&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_7_1_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_7_1_2&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_8_1_1&quot;</span><span class="ot">,</span> <span class="st">&quot;S3_8_1_2&quot;</span><span class="ot">,</span> <span class="st">&quot;Studie3sel&quot;</span><span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6">  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://schema.org/&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-7" data-line-number="7">  <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;Dataset&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-8" data-line-number="8">  <span class="dt">&quot;variableMeasured&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb118-9" data-line-number="9">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-10" data-line-number="10">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Q64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-11" data-line-number="11">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Ålder&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-12" data-line-number="12">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-13" data-line-number="13">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-14" data-line-number="14">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-15" data-line-number="15">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Q63&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-16" data-line-number="16">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Kön&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-17" data-line-number="17">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. Man,</span><span class="ch">\n</span><span class="st">2. Kvinna&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-18" data-line-number="18">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-19" data-line-number="19">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-20" data-line-number="20">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-21" data-line-number="21">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-22" data-line-number="22">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-23" data-line-number="23">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_1_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-24" data-line-number="24">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;I debatten diskuteras ibland att kommunerna skall kunna förbjuda tiggeri inom sina gränser. Vad tycker du själv om att förbjuda tiggeri i kommunen där du bor?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-25" data-line-number="25">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. Jag är huvudsakligen emot att förbjuda tiggeri i min kommun,</span><span class="ch">\n</span><span class="st">2. Jag är huvudsakligen för att förbjuda tiggeri i min kommun&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-26" data-line-number="26">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-27" data-line-number="27">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-28" data-line-number="28">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-29" data-line-number="29">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-30" data-line-number="30">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-31" data-line-number="31">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_2_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-32" data-line-number="32">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Hur viktig är frågan för dig personligen?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-33" data-line-number="33">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Inte alls viktig,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket viktig&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-34" data-line-number="34">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-35" data-line-number="35">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-36" data-line-number="36">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-37" data-line-number="37">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-38" data-line-number="38">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-39" data-line-number="39">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_4_1_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-40" data-line-number="40">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Hur rättvist tycker du att det gick till när det fattades beslut om att förbjuda tiggeri?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-41" data-line-number="41">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Inte alls rättvist,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket rättvist&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-42" data-line-number="42">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-43" data-line-number="43">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-44" data-line-number="44">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-45" data-line-number="45">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-46" data-line-number="46">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-47" data-line-number="47">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_4_1_2&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-48" data-line-number="48">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Hur rättvist tycker du att det gick till när det fattades beslut om att inte förbjuda tiggeri?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-49" data-line-number="49">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Inte alls rättvist,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket rättvist&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-50" data-line-number="50">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-51" data-line-number="51">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-52" data-line-number="52">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-53" data-line-number="53">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-54" data-line-number="54">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-55" data-line-number="55">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_5_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-56" data-line-number="56">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Och hur schysst tycker du att beslutsproceduren var?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-57" data-line-number="57">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Mycket oschysst,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket schysst&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-58" data-line-number="58">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-59" data-line-number="59">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-60" data-line-number="60">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-61" data-line-number="61">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-62" data-line-number="62">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-63" data-line-number="63">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_6_1_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-64" data-line-number="64">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Och om du tänker på själva beslutet att förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-65" data-line-number="65">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Mycket dåligt,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket bra&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-66" data-line-number="66">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-67" data-line-number="67">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-68" data-line-number="68">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-69" data-line-number="69">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-70" data-line-number="70">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-71" data-line-number="71">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_6_1_2&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-72" data-line-number="72">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Och om du tänker på själva beslutet att inte förbjuda tiggeri. Vad tycker Du allmänt sett om beslutet?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-73" data-line-number="73">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Mycket dåligt,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket bra&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-74" data-line-number="74">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-75" data-line-number="75">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-76" data-line-number="76">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-77" data-line-number="77">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-78" data-line-number="78">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-79" data-line-number="79">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_7_1_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-80" data-line-number="80">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Hur villig är du att acceptera och följa beslutet att förbjuda tiggeri?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-81" data-line-number="81">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Inte alls villig,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket villig&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-82" data-line-number="82">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-83" data-line-number="83">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-84" data-line-number="84">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-85" data-line-number="85">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-86" data-line-number="86">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-87" data-line-number="87">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_7_1_2&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-88" data-line-number="88">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Hur villig är du att acceptera och följa beslutet att inte förbjuda tiggeri?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-89" data-line-number="89">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Inte alls villig,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Mycket villig&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-90" data-line-number="90">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-91" data-line-number="91">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-92" data-line-number="92">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-93" data-line-number="93">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-94" data-line-number="94">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-95" data-line-number="95">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_8_1_1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-96" data-line-number="96">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;När det gäller att följa eller motarbeta beslutet att förbjuda tiggeri, var på skalan skulle du placera dig?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-97" data-line-number="97">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Kommer absolut att motarbeta beslutet,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Kommer absolut att följa beslutet&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-98" data-line-number="98">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-99" data-line-number="99">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-100" data-line-number="100">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-101" data-line-number="101">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-102" data-line-number="102">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-103" data-line-number="103">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;S3_8_1_2&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-104" data-line-number="104">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;När det gäller att följa eller motarbeta beslutet att inte förbjuda tiggeri, var på skalan skulle du placera dig?&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-105" data-line-number="105">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. 1 Kommer absolut att motarbeta beslutet,</span><span class="ch">\n</span><span class="st">2. 2,</span><span class="ch">\n</span><span class="st">3. 3,</span><span class="ch">\n</span><span class="st">4. 4,</span><span class="ch">\n</span><span class="st">5. 5,</span><span class="ch">\n</span><span class="st">6. 6,</span><span class="ch">\n</span><span class="st">7. 7 Kommer absolut att följa beslutet&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-106" data-line-number="106">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-107" data-line-number="107">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-108" data-line-number="108">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-109" data-line-number="109">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb118-110" data-line-number="110">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb118-111" data-line-number="111">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Studie3sel&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-112" data-line-number="112">      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Manipulation&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-113" data-line-number="113">      <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;1. förbjuda tiggeri, beslutet är fel,</span><span class="ch">\n</span><span class="st">2. förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,</span><span class="ch">\n</span><span class="st">3. förbjuda tiggeri,</span><span class="ch">\n</span><span class="st">4. inte förbjuda tiggeri, beslutet är fel,</span><span class="ch">\n</span><span class="st">5. inte förbjuda tiggeri, beslutet är fel, men man inte alltid kan få som man vill i en demokrati,</span><span class="ch">\n</span><span class="st">6. inte förbjuda tiggeri&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-114" data-line-number="114">      <span class="dt">&quot;maxValue&quot;</span><span class="fu">:</span> <span class="dv">6</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-115" data-line-number="115">      <span class="dt">&quot;minValue&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb118-116" data-line-number="116">      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;propertyValue&quot;</span></a>
<a class="sourceLine" id="cb118-117" data-line-number="117">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb118-118" data-line-number="118">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb118-119" data-line-number="119"><span class="fu">}</span><span class="er">`</span></a></code></pre></div>
</details>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-management.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Goodloser-appendix.pdf", "Goodloser-appendix.epub"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

</body>

</html>
